
<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Control de Gastos</title>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
body{font-family:Arial;background:#f4f6f8;margin:0;padding:20px}
h1{margin-bottom:20px}
.card{background:#fff;padding:15px;border-radius:10px;margin-bottom:20px}
input,select,button{padding:10px;border-radius:6px;border:1px solid #ccc}
button{background:#007bff;color:#fff;border:none;cursor:pointer}
table{width:100%;border-collapse:collapse;margin-top:15px}
th,td{padding:10px;border-bottom:1px solid #ddd;text-align:left}
</style>
</head>
<body>

<h1>Control de Gastos</h1>

<div class="card">
<input id="monto" placeholder="Monto">
<select id="categoria">
<option>Chivo</option>
<option>Nómina</option>
<option>Mis Gastos</option>
<option>Trabajo</option>
</select>
<button onclick="agregar()">Agregar</button>
</div>

<div class="card">
<input type="month" id="mesFiltro">
<select id="categoriaFiltro">
<option value="">Todas</option>
<option>Chivo</option>
<option>Nómina</option>
<option>Mis Gastos</option>
<option>Trabajo</option>
</select>
<button onclick="filtrar()">Filtrar</button>
<button onclick="limpiar()">Limpiar</button>

<table>
<thead>
<tr><th>Monto</th><th>Categoría</th><th>Fecha</th></tr>
</thead>
<tbody id="tabla"></tbody>
</table>
</div>

<script>
let movimientos = JSON.parse(localStorage.getItem("movs")||"[]");
let filtros={mes:"",cat:""};

function guardar(){localStorage.setItem("movs",JSON.stringify(movimientos))}

function agregar(){
const monto=parseFloat(monto.value);
if(!monto)return;
movimientos.push({monto,categoria:categoria.value,fecha:new Date().toISOString()});
guardar();render();
}

function filtrar(){
filtros.mes=mesFiltro.value;
filtros.cat=categoriaFiltro.value;
render();
}

function limpiar(){
filtros={mes:"",cat:""};
mesFiltro.value="";
categoriaFiltro.value="";
render();
}

function render(){
tabla.innerHTML="";
movimientos.filter(m=>{
let ok=true;
if(filtros.cat) ok &= m.categoria===filtros.cat;
if(filtros.mes){
const d=new Date(m.fecha);
const [a,mo]=filtros.mes.split("-");
ok &= d.getFullYear()==a && d.getMonth()+1==mo;
}
return ok;
}).forEach(m=>{
tabla.innerHTML+=`<tr>
<td>$${m.monto}</td>
<td>${m.categoria}</td>
<td>${new Date(m.fecha).toLocaleDateString()}</td>
</tr>`;
});
}

render();
</script>

</body>
</html>
